{% extends "base.html" %}<!--extends the base.html template-->

{% block title %}Search{% endblock %}<!--Override the default name from the base.html template-->

{% block content %}


<div class="container">
  <div class="row">
    <div class="col text-light bg-dark" style="margin:20px 0px 20px 0px">
      <h1 style="padding:20px 0px 20px 0px">{{Info["longName"]}}</h1>
    </div>
  </div>
  <div class="col-3">
    <p>Symbol: <span id="symbol">{{Info["symbol"]}}</span></p>
      <p> Current Price: $<span id="dayHigh">{{Info["currentPrice"]}}</span></p>  
  </div>
  <div class="col-9">
    <h2 id="companyName"></h2>
  </div>
</div>


<button class="btn btn-info" type="button" id="drawc">stop </button>
<div class="conatainer" style="width:900px;">
      <canvas id="myChart"></canvas>
      <button id="day">1d</button>
      <button id="mo3">3mo</button>
      <button id="mo6">6mo</button>
      <button id="year">1 year</button>
      <button id="year5"> 5 years</button>
      <button id="year10"> 10 year</button>
</div>




<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let bottom = JSON.parse({{ dates | tojson }})
let income = JSON.parse({{ money | tojson }})

const data = {
  labels: bottom,
  datasets: [{
    label: 'My First dataset',
    backgroundColor: 'rgb(255, 99, 132)',
    borderColor: 'rgb(255, 99, 132)',
    data:income,
  }]
};
const config = {
  type: 'line',
  data: data,
  options: {}
};

var ctx = document.getElementById("myChart");
var newmychart = new Chart(ctx,config);

let mo3=document.getElementById("mo3")



mo3.addEventListener("click",()=>{
  console.log('hello1')
  let xhr = new XMLHttpRequest();
  xhr.open('GET','http://127.0.0.1:5000/data',true);
  xhr.onload= function(){
    if(this.status == 200){
      let information = JSON.parse(this.responseText);
      
      dates =[]
      for(let num =0;num< information.length;num++)
      {
        dates.push(num)
      }
      newmychart.data.labels=dates;
      newmychart.data.datasets[0].data=information;
      newmychart.update();
    }

  }
  xhr.send();
});






</script>
<script type="text/javascript"
    src="{{ url_for('static', filename='stock.js')}}">
</script> 

{% endblock %}